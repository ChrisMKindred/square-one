paths:
    tests: tests
    output: tests/_output
    data: tests/_data
    support: tests/_support
    envs: tests/_envs
actor_suffix: Tester
bootstrap: _bootstrap.php
extensions:
    enabled:
        - Codeception\Extension\RunFailed
        - ValidateSuitesExtension
    commands:
        - Codeception\Command\GenerateWPUnit
        - Codeception\Command\GenerateWPRestApi
        - Codeception\Command\GenerateWPRestController
        - Codeception\Command\GenerateWPRestPostTypeController
        - Codeception\Command\GenerateWPAjax
        - Codeception\Command\GenerateWPCanonical
        - Codeception\Command\GenerateWPXMLRPC
params:
    - .env
settings:
    colors: true
    memory_limit: 1024M
    backup_globals: false

##
# Module configurations that apply to all suites,
# unless overridden in the suite file.
##
modules:
    config:
        ##
        # WPDb is responsible for performing read/write database operations.
        ##
        WPDb:
            dsn: '%DB_DSN%'
            user: '%DB_USER%'
            password: '%DB_PASSWORD%'
            dump: tests/_data/dump.sql
            url: '%WP_URL%'
            tablePrefix: '%TABLE_PREFIX%'
            urlReplacement: false
            ## "populate" will import the test database before any test runs.
            ## We recommend each suite define this parameter explicitly.
            # populate: true

            ## "cleanup" will import the test database between each test.
            ## It can significantly increase the time the tests take to run, but provides better isolation.
            ## We recommend each suite define this parameter explicitly.
            # cleanup: true

            ## Populator won't work in the context of Docker Containers.
            # populator: 'mysql --max_allowed_packet=512M -u $user -h $host -p$password $dbname < $dump'
        ##
        # WPLoader is responsible for loading WordPress in the CLI context that the tests run.
        ##
        WPLoader:
            wpRootFolder: '%WP_ROOT_FOLDER%'
            pluginsFolder: ../wp-content/plugins
            dbName: '%DB_NAME%'
            dbHost: '%DB_HOST%'
            dbUser: '%DB_USER%'
            dbPassword: '%DB_PASSWORD%'
            configFile: tests-config.php
            multisite: false
            plugins:
                - core/core.php
                - advanced-custom-fields-pro/acf.php
                - posts-to-posts/posts-to-posts.php
            activatePlugins:
                - core/core.php
                - advanced-custom-fields-pro/acf.php
                - posts-to-posts/posts-to-posts.php
            bootstrapActions:
                - [P2P_Storage, install]
                - [P2P_Storage, init]
                - tribe/project/queues/mysql/init_table